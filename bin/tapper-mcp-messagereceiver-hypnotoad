#! /usr/bin/perl
# PODNAME: tapper-client
# ABSTRACT: cmdline frontend Tapper::MCP::MessageReceiver::Hypnotoad

use Mojo::Server::Hypnotoad;

use File::Temp qw/ tempdir /;
use Tapper::Config;

my $dir = tempdir( CLEANUP => 1 );
my $port = Tapper::Config::subconfig->{mcp_port} || 7359;

open my $fh, ">", "$dir/tapper-mcp-messagereceiver.conf" or die "Can not create config file $dir/tapper-mcp-messagereceiver.conf: $!";
print $fh "{listen => ['http://*:$port'], workers => 10};";
close $fh;


my $toad = Mojo::Server::Hypnotoad->new;
$toad->run("bin/tapper-mcp-messagereceiver", "$dir/tapper-mcp-messagereceiver.conf");
print $$;

__END__
=pod

=encoding utf-8

=head1 NAME

tapper-client - cmdline frontend Tapper::MCP::MessageReceiver::Hypnotoad

=head1 AUTHOR

AMD OSRC Tapper Team <tapper@amd64.org>

=head1 COPYRIGHT AND LICENSE

This software is Copyright (c) 2012 by Advanced Micro Devices, Inc..

This is free software, licensed under:

  The (two-clause) FreeBSD License

=cut

